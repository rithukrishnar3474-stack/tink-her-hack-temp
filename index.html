<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TokenK </title>

<style>
body {
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: linear-gradient(rgba(255,255,255,0.75), rgba(255,255,255,0.75)),
    url('https://images.pexels.com/photos/247786/pexels-photo-247786.jpeg');
    background-size: cover;
    background-position: center;
}

.card {
    background: rgba(255,255,255,0.95);
    backdrop-filter: blur(8px);
    width: 90%;
    max-width: 480px;
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

/* Smooth Premium Transition */
.card {
    position: absolute;
    transition: all 0.45s cubic-bezier(0.4, 0, 0.2, 1);
    opacity: 1;
    transform: translateX(0) scale(1);
}

.hidden {
    opacity: 0 !important;
    transform: translateX(40px) scale(0.98) !important;
    pointer-events: none;
}

h2 {
    border-bottom: 3px solid #3498db;
    padding-bottom: 8px;
    margin-top: 0;
    color: #2c3e50;
}

label { font-weight: 600; margin-top: 10px; display:block; }

select, input {
    width: 100%;
    padding: 12px;
    margin: 8px 0;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 15px;
}

input.invalid {
    border: 2px solid #e74c3c !important;
    background-color: #fff5f5;
}

.btn {
    width: 100%;
    padding: 14px;
    border: none;
    border-radius: 12px;
    font-weight: bold;
    margin-top: 10px;
    cursor: pointer;
}

.btn-blue { background:#3498db; color:white; }
.btn-green { background:#27ae60; color:white; }
.btn-orange { background:#f39c12; color:white; }
.btn-red { background:#e74c3c; color:white; }

.hospital-item {
    background:#fafafa;
    border-radius:12px;
    padding:15px;
    margin-top:15px;
    border:1px solid #ddd;
}

.qr-placeholder {
    width:150px;
    height:150px;
    margin:20px auto;
    background:#f4f4f4;
    border:2px dashed #3498db;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    border-radius:10px;
}
</style>
</head>
<body>

<!-- SEARCH SCREEN -->
<div id="screen-search" class="card">
    <h2>Find a Hospital</h2>

    <label>Choose Location:</label>
    <select id="location">
        <option value="Palakkad">Palakkad</option>
        <option value="Thrissur">Thrissur</option>
        <option value="Ernakulam">Ernakulam</option>
        <option value="Kozhikode">Kozhikode</option>
    </select>

    <label>Department:</label>
    <select id="dept">
        <option>General Medicine</option>
        <option>Cardiology</option>
        <option>Pediatrics</option>
         <option>Gynaecology</option>
    </select>

    <button class="btn btn-blue" onclick="showHospitals()">Find Hospitals</button>
</div>

<!-- RESULTS SCREEN -->
<div id="screen-results" class="card hidden">
    <h2>Nearby Hospital</h2>
    <div class="hospital-item">
        <strong id="res-name">Hospital Name</strong><br>
        Place: <span id="res-place"></span><br>
        Doctors Available: 4<br>
        Wait Time: 45 mins

        <button class="btn btn-green" onclick="showBooking()">Book Token</button>
        <button class="btn btn-orange" onclick="showReminder()">Set Reminder</button>
    </div>
</div>

<!-- BOOKING SCREEN -->
<div id="screen-booking" class="card hidden">
    <h2>Confirm Booking</h2>
    <p><strong>Your Token: #104</strong></p>
    <p>12 patients ahead</p>
    <p>Estimated Arrival: 25 mins</p>

    <div class="qr-placeholder">
        QR CODE<br>SCAN TO PAY
    </div>

    <button class="btn btn-blue" onclick="showArrivalOptions()">I Have Paid</button>
</div>

<!-- ARRIVAL OPTIONS -->
<div id="screen-options" class="card hidden">
    <h2>Status at Hospital</h2>
    <button class="btn btn-green" onclick="alert('Please scan QR at counter now. Remember to scan again when leaving.')">REACHED</button>
    <button class="btn btn-orange" onclick="alert('Late status noted. You will be seen right next after the current patient finishes.')">LATE</button>
    <button class="btn btn-red" onclick="showRefund()">CANCEL</button>
</div>

<!-- REMINDER SCREEN -->
<div id="screen-reminder" class="card hidden">
    <h2 id="rem-title">Set Reminder</h2>

    <label>Select Date & Time:</label>
    <input type="datetime-local" id="reminderDate">
    <p id="dateError" style="color:#e74c3c; font-size:14px; display:none; margin-top:-5px;"></p>

    <button class="btn btn-blue" onclick="validateDate()">Save Reminder</button>
</div>

<script>

// Prevent past date selection
const now = new Date();
now.setMinutes(now.getMinutes() - now.getTimezoneOffset());
document.getElementById('reminderDate').min = now.toISOString().slice(0,16);

// Hospital Name Logic
function showHospitals(){
    let location = document.getElementById("location").value;
    let hospitalName = "";

    if(location === "Palakkad") hospitalName = "District Hospital Palakkad";
    else if(location === "Thrissur") hospitalName = "City General Thrissur";
    else if(location === "Ernakulam") hospitalName = "Lakeside Medical Ernakulam";
    else if(location === "Kozhikode") hospitalName = "Malabar Medical Centre";

    document.getElementById("res-name").innerText = hospitalName;
    document.getElementById("res-place").innerText = location;

    switchScreen("screen-search","screen-results");
}

function showBooking(){ switchScreen("screen-results","screen-booking"); }
function showReminder(){ switchScreen("screen-results","screen-reminder"); }
function showArrivalOptions(){ switchScreen("screen-booking","screen-options"); }

function showRefund(){
    alert("Refund initiated. Amount will return in 3-5 days.");
    document.getElementById("rem-title").innerText = "Reschedule Appointment";
    switchScreen("screen-options","screen-reminder");
}

function validateDate(){
    let input = document.getElementById("reminderDate");
    let errorText = document.getElementById("dateError");
    let selected = new Date(input.value);
    let current = new Date();

    input.classList.remove("invalid");
    input.setCustomValidity("");
    errorText.style.display = "none";
    errorText.innerText = "";

    if(!input.value){
        input.classList.add("invalid");
        input.setCustomValidity("Invalid date");
        errorText.innerText = "⚠ Please select a date and time.";
        errorText.style.display = "block";
        return;
    }

    if(selected < current){
        input.classList.add("invalid");
        input.setCustomValidity("Invalid date");
        errorText.innerText = "⚠ You cannot select a past date.";
        errorText.style.display = "block";
        return;
    }

    alert("✅ Reminder saved for " + input.value.replace("T"," "));
}

// Smooth Transition Override
function switchScreen(hideId, showId){
    const hideEl = document.getElementById(hideId);
    const showEl = document.getElementById(showId);

    hideEl.style.opacity = "0";
    hideEl.style.transform = "translateX(-30px)";

    setTimeout(() => {
        hideEl.classList.add("hidden");
        showEl.classList.remove("hidden");

        showEl.style.opacity = "0";
        showEl.style.transform = "translateX(30px)";

        setTimeout(() => {
            showEl.style.opacity = "1";
            showEl.style.transform = "translateX(0)";
        }, 50);

    }, 300);
}

</script>
</body>
</html>